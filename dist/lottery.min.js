!function(n){n.fn.lottery=function(e){function s(){c.index=c["continue"]?a():c.start,c.end=e.end?e.end>o.find(e.prizeClass).length-1?Math.floor(Math.random()*o.find(e.prizeClass).length):e.end:Math.floor(Math.random()*o.find(e.prizeClass).length),n(c.clickSelector).unbind("click",c.event),o.find(c.prizeClass+"-"+c.index).removeClass(c.activeClass+" "+c.goalClass),l=i()}function a(){var n=o.find("."+c.activeClass).attr("class");return n?parseInt(n.substring(n.indexOf(e.prizeClass.substring(1)+"-")).split(" ")[0].split("-")[2])+1:c.start}function i(){return setInterval(function(){c.index=c.index>c.amount-1?0:c.index,t(),c.index++},c.speed)}function t(){var e=c.index,s=0==e?c.amount-1:e-1;o.find(c.prizeClass+"-"+e).addClass(c.activeClass),o.find(c.prizeClass+"-"+s).removeClass(c.activeClass),c.constant?u>=c.amount*c.round+c.end&&(clearInterval(l),o.find(c.prizeClass+"-"+c.index).addClass(c.goalClass),n(c.clickSelector).bind("click",c.event),c.finish(o.find(c.prizeClass+"-"+c.end))):u==c.amount*(c.round-1)?(clearInterval(l),c.speed=c.speed+50,d=i()):u==c.amount*c.round?(clearInterval(d),c.speed=c.speed+100,r=i()):u>=c.amount*c.round+c.end&&(clearInterval(r),o.find(c.prizeClass+"-"+c.index).addClass(c.goalClass),n(c.clickSelector).bind("click",c.event),c.finish(o.find(c.prizeClass+"-"+c.end))),u++}var l,d,r,o=this,c=n.extend({amount:o.find(e.prizeClass).length,"continue":!0,constant:!1,speed:100,round:2,start:0,activeClass:"active",goalClass:"goal",finish:function(){}},e),u=a()||0;return s(),o}}(jQuery);